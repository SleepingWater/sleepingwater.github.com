<!DOCTYPE html>
<html>
<head>
	<title>websocket echo test</title>
	<script src="https://cdn.socket.io/socket.io-1.1.0.js"></script>
	<script type="text/javascript">
		var lastMessage;
		window.onload = function(){
			//create websocket
			var ws = new WebSocket('ws://localhost:3000');
			ws.onopen = function(){
				//send first ping
				ping();
			}
		}
		ws.onmessage = function(ev){
				console.log(' got: '+ev.data);
				docunment.getElementById("latency").innerHTML = new Date - lastMessage;
				ping();
			}
		function ping(){
			lastMessage = + newDate;
			ws.send('ping');
		}
	</script>
</head>
<body>
<h1>WebSocket Echo</h1>
<h2>latency:<span id="latency"></span>ms</h2>
</body>
</html>